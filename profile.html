<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="icon" href="favicon-new.png" type="image/png" />
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#000000">

  <meta name="apple-mobile-web-app-title" content="Zone Vault">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  <link rel="apple-touch-icon" sizes="192x192" href="favicon-new.png">
  <link rel="apple-touch-icon" sizes="512x512" href="favicon-new.png">
  <link rel="apple-touch-startup-image" href="splash.png">

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-1B2RJ659GL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-1B2RJ659GL');
  </script>
  
  <script>
    (function() {
      const savedTheme = localStorage.getItem('zoneVaultTheme');
      if(savedTheme) {
        const style = document.createElement('style');
        style.innerHTML = `
          body { 
            background: ${savedTheme} !important; 
            background-size: cover !important;
            background-attachment: fixed !important;
            background-repeat: no-repeat !important;
            min-height: 100vh;
          }
        `;
        document.head.appendChild(style);
      }
    })();
  </script>
  
  <title>Profile | Zone Vault</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
    /* =========================================
       1. VARIABLES
       ========================================= */
    :root {
        /* Profile Colors */
        --bg-color: #050505;
        --accent: #2196f3;
        --text-main: #ffffff;
        --text-muted: #e0e0e0; 
        --danger: #ef4444;
        --youtube-red: #ff0000;
        
        /* HOME PAGE GLASS SETTINGS (Exact Match) */
        --glass-bg: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
        --glass-border: 1px solid rgba(255, 255, 255, 0.2);
        --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        --glass-blur: blur(20px);
        --text-shadow: 0 1px 2px rgba(0,0,0,0.8);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }

    html, body { height: 100%; }

    body { 
        background-color: var(--bg-color);
        color: var(--text-main);
        margin: 0;
        font-family: 'Segoe UI', Arial, sans-serif; /* Match Home Font */
        overflow-x: hidden;
        font-size: 16px;
        transition: background 0.5s ease;
    }

    /* =========================================
       2. HEADER (LEFT ALIGNED LAYOUT)
       ========================================= */
    header {
        padding: 15px 20px; 
        display: flex;
        align-items: center;
        /* REVERTED: Space-between puts Links Left and Profile Right */
        justify-content: space-between; 
        position: sticky;
        top: 0;
        z-index: 100;
        
        /* Hyper Glass Effect */
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(25px);
        -webkit-backdrop-filter: blur(25px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        /* SMOOTHNESS BOOSTER */
        transform: translateZ(0);
        will-change: transform, backdrop-filter;
    }

    header.show { transform: translateY(0); transition: transform 0.6s ease-out; }
    header.hide { transform: translateY(-100%); }

    .header-links {
        display: flex;
        gap: 15px;
        align-items: center;
        justify-content: center; /* Internal centering */
        overflow-x: auto;
        white-space: nowrap;
        scrollbar-width: none;
        -webkit-overflow-scrolling: touch;
    }

    .header-logo { width: 40px; height: auto; flex: 0 0 auto; }
    .header-logo img { 
        width: 40px; 
        height: auto; 
        filter: drop-shadow(0 1px 3px rgba(0, 0, 0, 0.5)); 
    }

    /* Header Buttons */
    .category-link {
        padding: 8px 16px;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-top: 1px solid rgba(255, 255, 255, 0.4);
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        color: #fff;
        border-radius: 12px;
        font-size: 14px;
        text-decoration: none;
        font-weight: bold;
        transition: all 0.3s ease;
        position: relative;
        text-shadow: var(--text-shadow);
        /* SMOOTHNESS BOOSTER */
        transform: translateZ(0);
        will-change: transform, backdrop-filter;
    }

    .category-link::before {
        content: ""; position: absolute; inset: 0; border-radius: 12px;
        background: rgba(255, 255, 255, 0.1); opacity: 0; transition: opacity 0.3s; z-index: -1;
    }

    .category-link:hover {
        color: #fff; transform: scale(1.05);
        background: rgba(255, 255, 255, 0.25); border-color: rgba(255, 255, 255, 0.5);
    }
    .category-link:hover::before { opacity: 1; }

    .category-link.active { 
        background: #fff; color: #000; backdrop-filter: none; text-shadow: none; 
    }

    /* --- PC HEADER PROFILE WIDGET STYLES (REVERTED) --- */
    .header-user-widget {
        display: flex;
        align-items: center;
        gap: 12px;
        text-decoration: none;
        background: rgba(0,0,0,0.3);
        padding: 5px 12px 5px 5px;
        border-radius: 30px;
        border: 1px solid rgba(255,255,255,0.1);
        transition: all 0.2s ease;
        margin-left: 20px;
        flex-shrink: 0;
        /* No absolute positioning needed for Left/Right split */
    }
    .header-user-widget:hover {
        background: rgba(255,255,255,0.15);
        border-color: rgba(255,255,255,0.3);
    }
    .header-user-img-small {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid rgba(255,255,255,0.2);
    }
    .header-user-name {
        color: white;
        font-size: 14px;
        font-weight: 600;
        text-shadow: 0 1px 2px rgba(0,0,0,0.8);
        white-space: nowrap;
        max-width: 150px;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    /* --- MOBILE HEADER PROFILE WIDGET STYLES --- */
    .mobile-user-widget {
        display: flex;
        align-items: center;
        gap: 8px;
        text-decoration: none;
        background: rgba(0,0,0,0.3);
        padding: 4px 10px 4px 4px;
        border-radius: 20px;
        border: 1px solid rgba(255,255,255,0.1);
    }
    .mobile-user-img-small {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        object-fit: cover;
        border: 1px solid rgba(255,255,255,0.4);
    }
    .mobile-user-name {
        color: white;
        font-size: 12px;
        font-weight: 600;
        max-width: 100px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    /* =========================================
       3. SIDEBAR (EXACT HOME COPY)
       ========================================= */
    .sidebar {
        display: flex;
        flex-direction: column;
        position: fixed;
        top: 0;
        left: -100%;
        width: 80%;
        max-width: 300px;
        height: 100%;
        
        /* Deep Dark Glass */
        background: rgba(0, 0, 0, 0.65);
        backdrop-filter: blur(30px);
        -webkit-backdrop-filter: blur(30px);
        
        z-index: 9999;
        padding: 20px;
        gap: 10px;
        transition: left 0.3s ease;
        justify-content: space-between;
        border-right: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 10px 0 30px rgba(0, 0, 0, 0.6);
        overflow-y: auto;
        /* SMOOTHNESS BOOSTER */
        transform: translateZ(0);
        will-change: transform, backdrop-filter;
    }

    .sidebar.open { left: 0; }

    /* Close Button (Matched Size) */
    .sidebar .close-btn {
        align-self: flex-end;
        background: none;
        border: none;
        font-size: 26px; 
        color: #fff;
        cursor: pointer;
        transition: transform 0.2s ease;
    }
    .sidebar .close-btn:hover { transform: rotate(90deg); }

    /* Sidebar Title */
    .sidebar-title {
        font-size: 26px;
        font-weight: 700;
        text-align: center;
        color: #f1f1f1;
        margin-bottom: 20px;
        text-transform: uppercase;
        letter-spacing: 1px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        padding-bottom: 10px;
    }

    /* Sidebar Nav */
    .sidebar-nav {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-top: 20px;
        padding-right: 5px;
    }

    .sidebar-nav a {
        text-decoration: none;
        color: #fff;
        font-size: 15px;
        font-weight: 500;
        padding: 10px;
        border-radius: 8px;
        transition: all 0.3s ease;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .sidebar-nav a:hover {
        background: rgba(255, 255, 255, 0.15);
        padding-left: 20px;
        border-color: rgba(255, 255, 255, 0.3);
    }

    /* Footer & Logos */
    .sidebar-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: auto;
        padding-top: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.2);
    }

    .sidebar-logo img { 
        width: 50px; 
        height: auto; 
    }

    /* EMAIL LOGO FIXED */
    .sidebar-email a { 
        color: white; 
        font-size: 18px; 
        text-decoration: none; 
        display: flex;
        align-items: center;
    }
    .sidebar-email a:hover { color: #00bfff; }
    
    .sidebar-email img {
        width: 30px;
        height: 30px;
        object-fit: contain;
    }

    /* =========================================
       4. MOBILE HEADER (EXACT HOME COPY)
       ========================================= */
    .mobile-header { display: none; }

    @media (max-width: 768px) {
        header { display: none; } 
        #scrollHeader { display: none; }

        .mobile-header {
            display: flex;
            /* EXACT HOME PADDING - Fixes Hamburger Position */
            padding: 10px 15px; 
            align-items: center;
            justify-content: space-between;
            
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            position: sticky;
            top: 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            /* SMOOTHNESS BOOSTER */
            transform: translateZ(0);
            will-change: transform, backdrop-filter;
        }

        .hamburger { 
            font-size: 26px; 
            background: none; 
            border: none; 
            color: white; 
            cursor: pointer; 
            text-shadow: 0 1px 2px rgba(0,0,0,0.5); 
        }

        .header-search input {
             padding: 6px 10px;
             border: 1px solid rgba(255, 255, 255, 0.2);
             background: rgba(0, 0, 0, 0.3);
             color: white;
             border-radius: 20px;
             outline: none;
             backdrop-filter: blur(4px);
        }

        /* Mobile Sidebar Adjustments (From Home) */
        .sidebar-logo img { width: 60px; }
        .sidebar-title { font-size: 30px; margin-bottom: 15px; }
    }

    /* =========================================
       5. PROFILE CONTENT (PRESERVED)
       ========================================= */
    .main-wrapper {
        max-width: 1000px; margin: 40px auto; width: 95%;
        display: flex; flex-direction: column; gap: 20px;
    }

    .profile-header-card {
        background: var(--glass-bg);
        backdrop-filter: var(--glass-blur);
        -webkit-backdrop-filter: var(--glass-blur);
        border: var(--glass-border);
        box-shadow: var(--glass-shadow);
        border-radius: 16px; overflow: hidden; position: relative;
        border-top: 1px solid rgba(255, 255, 255, 0.5); 
        border-left: 1px solid rgba(255, 255, 255, 0.5);
        /* SMOOTHNESS BOOSTER */
        transform: translateZ(0);
        will-change: transform, backdrop-filter;
    }

    .banner-bg {
        height: 150px; width: 100%;
        background: linear-gradient(120deg, #1e3c72, #2a5298);
        background-size: cover; background-position: center;
        position: relative; transition: background 0.3s ease;
    }
    .banner-bg::after {
        content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 50%;
        background: linear-gradient(to top, rgba(0,0,0,0.6), transparent);
    }

    .profile-content {
        padding: 20px 30px 30px; position: relative;
        display: flex; flex-direction: column; align-items: center;
        margin-top: -60px;
    }

    .avatar-container { position: relative; margin-bottom: 15px; cursor: pointer; }
    .profile-img {
        width: 120px; height: 120px; border-radius: 50%;
        border: 4px solid rgba(30,30,30,0.8);
        object-fit: cover; background: #222;
        box-shadow: 0 10px 30px rgba(0,0,0,0.6); transition: filter 0.3s;
    }
    .avatar-container:hover .profile-img { filter: brightness(0.8); }

    .avatar-edit-badge {
        position: absolute; bottom: 5px; right: 5px;
        background: var(--accent); width: 32px; height: 32px;
        border-radius: 50%; display: flex; align-items: center; justify-content: center;
        border: 3px solid #222; pointer-events: none;
    }

    .user-details { text-align: center; width: 100%; max-width: 500px; }
    #profile-display-view h1 { font-size: 28px; font-weight: 700; margin-bottom: 5px; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
    #profile-display-view p { color: var(--text-muted); font-size: 14px; margin-bottom: 15px; text-shadow: 0 1px 2px rgba(0,0,0,0.5); }
    
    .edit-btn {
        background: rgba(255,255,255,0.15); 
        border: 1px solid rgba(255,255,255,0.3);
        color: white; padding: 8px 16px; border-radius: 20px; font-size: 12px;
        cursor: pointer; margin-top: 10px; transition: all 0.2s;
        backdrop-filter: blur(4px);
        /* SMOOTHNESS BOOSTER */
        transform: translateZ(0);
        will-change: transform, backdrop-filter;
    }
    .edit-btn:hover { background: rgba(255,255,255,0.3); border-color: white; }

    #profile-edit-view {
        width: 100%; margin-top: 20px; background: rgba(0, 0, 0, 0.4);
        padding: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);
        display: none; backdrop-filter: blur(10px);
        /* SMOOTHNESS BOOSTER */
        transform: translateZ(0);
        will-change: transform, backdrop-filter;
    }

    .form-group { margin-bottom: 15px; text-align: left; }
    .form-group label { display: block; font-size: 12px; color: #ccc; margin-bottom: 6px; text-transform: uppercase; text-shadow: 0 1px 2px rgba(0,0,0,0.8); }
    .custom-input {
        width: 100%; background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.2);
        color: white; padding: 12px; border-radius: 8px; font-size: 14px;
        backdrop-filter: blur(5px);
    }
    .custom-input:focus { outline: none; border-color: var(--accent); background: rgba(0,0,0,0.7); }
    
    .button-group { display: flex; gap: 10px; margin-top: 15px; }
    .primary-btn {
        flex: 1; padding: 12px; background: var(--accent); color: white;
        border: none; border-radius: 8px; font-weight: 600; cursor: pointer;
        box-shadow: 0 4px 10px rgba(33, 150, 243, 0.3);
    }
    .cancel-btn {
        flex: 1; padding: 12px; background: transparent; border: 1px solid rgba(255,255,255,0.3);
        color: #eee; border-radius: 8px; font-weight: 600; cursor: pointer;
    }
    .secondary-btn {
        width: 100%; padding: 10px; background: rgba(255,255,255,0.1);
        border: 1px solid rgba(255,255,255,0.2); color: #fff; border-radius: 8px;
        font-weight: 500; cursor: pointer; margin-top: 10px;
    }

    .notice-wrapper { position: absolute; top: 20px; right: 20px; z-index: 10; }
    #noticeBtn {
        background: rgba(0,0,0,0.5); backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.3); width: 40px; height: 40px;
        border-radius: 50%; display: flex; align-items: center; justify-content: center;
        cursor: pointer; color: white; position: relative;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        /* SMOOTHNESS BOOSTER */
        transform: translateZ(0);
        will-change: transform, backdrop-filter;
    }

    .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
    
    .info-card {
        background: var(--glass-bg); backdrop-filter: var(--glass-blur);
        -webkit-backdrop-filter: var(--glass-blur); border: var(--glass-border);
        box-shadow: var(--glass-shadow); border-radius: 16px; padding: 25px;
        display: flex; flex-direction: column;
        border-top: 1px solid rgba(255, 255, 255, 0.5); border-left: 1px solid rgba(255, 255, 255, 0.5);
        /* SMOOTHNESS BOOSTER */
        transform: translateZ(0);
        will-change: transform, backdrop-filter;
    }
    .info-card h3 {
        font-size: 16px; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted);
        margin-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.15); padding-bottom: 10px;
        display: flex; align-items: center; gap: 10px; text-shadow: 0 1px 2px rgba(0,0,0,0.5);
    }
    .content-area { flex: 1; font-size: 14px; line-height: 1.6; text-shadow: 0 1px 1px rgba(0,0,0,0.5); }

    .history-card {
        display: flex; gap: 15px; background: rgba(0, 0, 0, 0.2); backdrop-filter: blur(5px);
        border-radius: 8px; overflow: hidden; margin-bottom: 15px; cursor: pointer;
        transition: all 0.2s; border: 1px solid rgba(255,255,255,0.1);
        /* SMOOTHNESS BOOSTER */
        transform: translateZ(0);
        will-change: transform, backdrop-filter;
    }
    .history-card:hover {
        background: rgba(255,255,255,0.15); border: 1px solid rgba(255,255,255,0.4);
        transform: translateY(-2px);
    }

    .history-thumb-wrapper {
        position: relative; width: 140px; min-width: 140px; aspect-ratio: 16/9; background: #000;
    }
    .history-thumb-img { width: 100%; height: 100%; object-fit: cover; }
    
    .progress-bar-bg {
        position: absolute; bottom: 0; left: 0; width: 100%; height: 3px; background: rgba(255,255,255,0.3);
    }
    .progress-bar-fill { height: 100%; width: 0%; background: var(--youtube-red); transition: width 0.3s; }
    .time-badge {
        position: absolute; bottom: 6px; right: 6px; background: rgba(0,0,0,0.85);
        color: white; font-size: 10px; font-weight: bold; padding: 2px 4px; border-radius: 4px;
    }

    .history-details { padding: 8px 8px 8px 0; display: flex; flex-direction: column; justify-content: center; flex: 1; }
    .history-title {
        font-size: 14px; font-weight: 600; color: white; margin-bottom: 4px;
        display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
        text-shadow: 0 1px 2px rgba(0,0,0,0.8);
    }
    .history-meta { font-size: 12px; color: #ccc; text-shadow: 0 1px 2px rgba(0,0,0,0.8); }
    .history-resume-text {
        font-size: 11px; color: var(--accent); margin-top: 4px; text-transform: uppercase;
        font-weight: bold; display: flex; align-items: center; gap: 5px;
    }

    .logout-btn {
        width: 100%; margin-top: 20px; padding: 14px; background: rgba(239, 68, 68, 0.1);
        border: 1px solid var(--danger); color: var(--danger); font-weight: 600;
        border-radius: 8px; cursor: pointer; backdrop-filter: blur(5px);
        transition: background 0.2s;
    }
    .logout-btn:hover { background: rgba(239, 68, 68, 0.2); }

    @media (max-width: 600px) {
        .banner-bg { height: 120px; }
        .profile-content { margin-top: -50px; padding: 15px; }
        .profile-img { width: 100px; height: 100px; }
        .dashboard-grid { grid-template-columns: 1fr; }
        .history-thumb-wrapper { width: 120px; min-width: 120px; }
        .history-title { font-size: 13px; }
    }
    
    /* Modals */
    #avatarModal, #bannerColorModal, #noticeModal {
        display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.8); z-index: 10001; justify-content: center; align-items: center;
        backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
        /* SMOOTHNESS BOOSTER */
        transform: translateZ(0);
        will-change: transform, backdrop-filter;
    }
    .avatar-modal-content, .banner-color-modal-content {
        background: rgba(30, 30, 30, 0.9); 
        padding: 25px; border-radius: 16px; width: 90%; max-width: 450px;
        border: 1px solid rgba(255,255,255,0.2); text-align: center; max-height: 80vh; overflow-y: auto;
        box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    }
    .avatar-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 20px; }
    .avatar-option {
        width: 100%; aspect-ratio: 1/1; border-radius: 50%; object-fit: cover;
        border: 2px solid transparent; cursor: pointer; transition: all 0.2s;
    }
    .avatar-option:hover { border-color: var(--accent); transform: scale(1.1); }

    .banner-color-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 20px; }
    .color-option {
        width: 100%; aspect-ratio: 1/1; border-radius: 8px; border: 2px solid transparent;
        cursor: pointer; transition: all 0.2s;
    }
    .color-option:hover { border-color: var(--accent); transform: scale(1.1); }
    .color-option.selected { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.5); }
</style>
</head>
<body>
  
<div class="mobile-header">
  <button class="hamburger" onclick="toggleSidebar()">‚ò∞</button>
  
  <a href="profile" class="mobile-user-widget">
    <img id="mobile-header-img" src="https://via.placeholder.com/30" class="mobile-user-img-small" alt="User">
    <span id="mobile-header-name" class="mobile-user-name">...</span>
  </a>
</div>

<header id="scrollHeader">
  <div class="header-links">
    <div class="header-logo">
      <img src="https://uploads.onecompiler.io/43ddry4jt/43s3sjvch/Zone%20Vault%20logo.png" alt="Logo" />
    </div>
    <a class="category-link" href="index">LOGIN</a>
    <a class="category-link" href="profile">PROFILE</a>
    <a class="category-link" href="home">HOME</a>
    <a class="category-link" href="live">LIVE</a>
    <a class="category-link" href="gallery">GALLERY</a>
    <a class="category-link" href="videos">VIDEOS</a>
  </div>

  <a href="profile" class="header-user-widget">
    <img id="header-profile-img" src="https://via.placeholder.com/35" class="header-user-img-small" alt="Profile">
    <span id="header-display-name" class="header-user-name">Loading...</span>
  </a>
</header>

<div id="mobileSidebar" class="sidebar">
  <button class="close-btn" onclick="toggleSidebar()">‚úñ</button>
  <div class="sidebar-title">Zone Vault</div>
  <nav class="sidebar-nav">
    <a href="index.html">LOGIN</a>
    <a href="profile">PROFILE</a>
    <a href="home">HOME</a>
    <a href="live">LIVE</a>
    <a href="gallery">GALLERY</a>
    <a href="videos">VIDEOS</a>
  </nav>
  <div class="sidebar-footer">
    <div class="sidebar-logo">
      <img src="https://uploads.onecompiler.io/43ddry4jt/43s3sjvch/Zone%20Vault%20logo.png" alt="Logo" />
    </div>
    <div class="sidebar-email">
      <a href="mailto:zonevaultph@gmail.com">
        <img src="https://uploads.onecompiler.io/43ddry4jt/43s3sjvch/letter.png" alt="Email" />
      </a>
    </div>
  </div>
</div>
  
  <div class="main-wrapper">

    <div class="profile-header-card">
      <div class="banner-bg" id="profile-banner">
        <div class="notice-wrapper">
           <button id="noticeBtn" title="View Notices">
             üîî
             <span id="noticeCount" style="
               position: absolute; top: 0; right: 0;
               background: var(--danger); color: white;
               border-radius: 50%; font-size: 10px; width: 16px; height: 16px;
               display: none; align-items: center; justify-content: center; border: 2px solid #121212;
             ">0</span>
           </button>
        </div>
      </div>

      <div class="profile-content">
        <div class="avatar-container" onclick="openAvatarModal()">
          <img id="profile-pic" class="profile-img" src="https://via.placeholder.com/120" alt="Profile" />
          <div class="avatar-edit-badge">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M5 12h14"/></svg>
          </div>
        </div>

        <div class="user-details">
          <p id="email" style="margin-bottom: 10px; font-size: 12px; opacity: 0.7; text-shadow: 0 1px 2px rgba(0,0,0,0.8);">Loading email...</p>

          <div id="profile-display-view">
              <h1 id="display-name">Loading...</h1>
              <p id="display-bio" style="font-style:italic;">...</p>
              <button onclick="toggleEditMode()" class="edit-btn">Edit Profile</button>
          </div>

          <div id="profile-edit-view">
            <div class="form-group">
              <label>Display Name</label>
              <input type="text" class="custom-input" id="nameInput" placeholder="Enter new name">
            </div>
            <div class="form-group">
              <label>Bio / Status</label>
              <textarea id="bioInput" class="custom-input" rows="2" placeholder="What's on your mind?"></textarea>
            </div>
            <button onclick="openBannerColorModal()" class="secondary-btn">Change Banner Theme</button>
            <div class="button-group">
                <button onclick="updateProfile()" class="primary-btn">Save</button>
                <button onclick="toggleEditMode()" class="cancel-btn">Cancel</button>
            </div>
          </div>

        </div>
      </div>
    </div>

    <div class="dashboard-grid">
      
      <div class="info-card">
        <h3>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
          Latest Updates
        </h3>
        <div class="content-area" id="dashboard-notice-list">
          <div style="color:#ddd; font-style:italic;">Checking updates...</div>
        </div>
      </div>
      
      <div class="info-card">
        <h3>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
          Watch History
        </h3>
        
        <div class="content-area" id="watched-list">
            <div style="color:#ddd; font-style:italic; padding:10px;">Syncing from cloud...</div>
        </div>
      </div>

      <div class="info-card">
        <h3>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
          Access Status
        </h3>
        <div class="content-area" id="join-status">Checking...</div>
      </div>
      
    </div>

    <button onclick="logout()" class="logout-btn">Log out</button>

  </div>

  <div id="noticeModal">
    <div style="background: #1a1a1a; padding: 25px; border-radius: 16px; width: 90%; max-width: 450px; border: 1px solid #333; box-shadow: 0 20px 50px rgba(0,0,0,0.5);">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
        <h2 style="margin:0; font-size:18px;">Notifications</h2>
        <button id="closeNoticeModal" style="background:none; border:none; color:white; cursor:pointer; font-size:20px;">&times;</button>
      </div>
      <div id="noticeList" style="max-height:300px; overflow-y:auto;">Loading...</div>
    </div>
  </div>

  <div id="avatarModal">
    <div class="avatar-modal-content">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3 style="margin:0;">Choose Avatar</h3>
        <button onclick="closeAvatarModal()" style="background:none; border:none; color:white; font-size:20px; cursor:pointer;">&times;</button>
      </div>
      <div class="avatar-grid" id="avatarGrid"></div>
    </div>
  </div>

  <div id="bannerColorModal">
    <div class="banner-color-modal-content">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3 style="margin:0;">Choose Banner Theme</h3>
        <button onclick="closeBannerColorModal()" style="background:none; border:none; color:white; font-size:20px; cursor:pointer;">&times;</button>
      </div>
      <div class="banner-color-grid" id="bannerColorGrid"></div>
      <div class="button-group" style="margin-top: 20px;">
          <button onclick="saveBannerColor()" class="primary-btn">Apply Theme</button>
          <button onclick="closeBannerColorModal()" class="cancel-btn">Cancel</button>
      </div>
    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAs2S6iRhnYhmqNuF0QCCYu5NuzxHxIRv0",
      authDomain: "tvnstream-b4497.firebaseapp.com",
      databaseURL: "https://tvnstream-b4497-default-rtdb.firebaseio.com",
      projectId: "tvnstream-b4497",
      storageBucket: "tvnstream-b4497.appspot.com",
      messagingSenderId: "308384754214",
      appId: "1:308384754214:web:2938e76cd29b288f75d4e7"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();
    const storage = firebase.storage();

    // --- 1. AVATAR LOGIC ---
    const avatarOptions = [
        "https://raw.githubusercontent.com/svtzoneph/gallery/main/images/profile/scoups.png", 
        "https://raw.githubusercontent.com/svtzoneph/gallery/main/images/profile/jeonghan.png", 
        "https://raw.githubusercontent.com/svtzoneph/gallery/main/images/profile/joshua.png", 
        "https://raw.githubusercontent.com/svtzoneph/gallery/main/images/profile/jun.png", 
        "https://raw.githubusercontent.com/svtzoneph/gallery/main/images/profile/hoshi.png", 
        "https://raw.githubusercontent.com/svtzoneph/gallery/main/images/profile/wonwoo.png", 
        "https://raw.githubusercontent.com/svtzoneph/gallery/main/images/profile/woozi.png", 
        "https://raw.githubusercontent.com/svtzoneph/gallery/main/images/profile/dk.png", 
        "https://raw.githubusercontent.com/svtzoneph/gallery/main/images/profile/mingyu.png", 
        "https://raw.githubusercontent.com/svtzoneph/gallery/main/images/profile/the8.png", 
        "https://raw.githubusercontent.com/svtzoneph/gallery/main/images/profile/seungkwan.png", 
        "https://raw.githubusercontent.com/svtzoneph/gallery/main/images/profile/vernon.png", 
        "https://raw.githubusercontent.com/svtzoneph/gallery/main/images/profile/dino.png", 
    ];

    function openAvatarModal() {
        const grid = document.getElementById('avatarGrid');
        grid.innerHTML = ''; 
        avatarOptions.forEach(src => {
            const img = document.createElement('img');
            img.src = src;
            img.className = 'avatar-option';
            img.onclick = () => selectAvatar(src);
            img.loading = 'lazy'; // SMOOTHNESS BOOSTER
            grid.appendChild(img);
        });
        document.getElementById('avatarModal').style.display = "flex";
    }

    function closeAvatarModal() {
        document.getElementById('avatarModal').style.display = "none";
    }

    function selectAvatar(url) {
        const user = auth.currentUser;
        if (!user) return;
        document.getElementById("profile-pic").src = url;
        // Update both header images as well
        if(document.getElementById("header-profile-img")) document.getElementById("header-profile-img").src = url;
        if(document.getElementById("mobile-header-img")) document.getElementById("mobile-header-img").src = url;

        db.ref("users/" + user.uid).update({ profilePicture: url }).then(() => {
            closeAvatarModal();
        });
    }

    // --- 2. BANNER COLOR LOGIC ---
    let tempSelectedBanner = null;
    const bannerOptions = [
        "linear-gradient(135deg, #F7CAC9, #92A8D1)", // Rose Quartz & Serenity
        "linear-gradient(120deg, #1e3c72, #2a5298)", // Default Blue
        "linear-gradient(120deg, #e65c00, #F9D423)", // Orange/Gold
        "linear-gradient(120deg, #cc2b5e, #753a88)", // Purple/Pink
        "linear-gradient(120deg, #11998e, #38ef7d)", // Green/Teal
        "linear-gradient(120deg, #000000, #434343)", // Black/Gray
        "linear-gradient(120deg, #8E2DE2, #4A00E0)", // Deep Purple
        "linear-gradient(120deg, #ee0979, #ff6a00)", // Hot Pink/Orange
    ];

    function openBannerColorModal() {
        const grid = document.getElementById('bannerColorGrid');
        grid.innerHTML = '';
        
        bannerOptions.forEach(color => {
            const div = document.createElement('div');
            div.className = 'color-option';
            div.style.background = color;
            div.onclick = () => {
                document.querySelectorAll('.color-option').forEach(el => el.classList.remove('selected'));
                div.classList.add('selected');
                tempSelectedBanner = color;
            };
            grid.appendChild(div);
        });
        
        document.getElementById('bannerColorModal').style.display = 'flex';
    }

    function closeBannerColorModal() {
        document.getElementById('bannerColorModal').style.display = 'none';
    }

    function saveBannerColor() {
        if(!tempSelectedBanner) {
            closeBannerColorModal();
            return;
        }
        
        const user = auth.currentUser;
        
        // 1. Apply Visually immediately
        document.getElementById('profile-banner').style.background = tempSelectedBanner;
        document.body.style.background = tempSelectedBanner;
        document.body.style.backgroundSize = "cover";
        document.body.style.backgroundAttachment = "fixed";
        
        // 2. Save to LocalStorage (For other pages)
        localStorage.setItem('zoneVaultTheme', tempSelectedBanner);

        // 3. Save to Firebase
        if(user) {
            db.ref("users/" + user.uid).update({ bannerColor: tempSelectedBanner }).then(() => {
                closeBannerColorModal();
            });
        }
    }

    // --- UPDATED NOTICE LOGIC ---
    auth.onAuthStateChanged(user => {
      if (user) {
        const uid = user.uid;
        
        // Listen for notices
        db.ref("notices").on("value", snapshot => {
          const allNotices = snapshot.val() || {};
          let userNotices = [];

          // Filter notices
          for (let id in allNotices) {
            const n = allNotices[id];
            
            // ROBUST FILTER: 
            // 1. If 'to' matches User ID
            // 2. OR if 'to' is "ALL"
            // 3. OR if 'to' is missing/undefined (assume it's for everyone)
            if (n.to === uid || n.to === "ALL" || !n.to) {
              userNotices.push({ id, ...n });
            }
          }

          // Sort by newest first (Handle missing timestamps safely)
          userNotices.sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));
          
          // 1. Update The Bell Counter
          const unreadCount = userNotices.filter(n => !n.read).length;
          const noticeCount = document.getElementById("noticeCount");
          if (noticeCount) {
              if (unreadCount > 0) {
                noticeCount.style.display = "flex";
                noticeCount.textContent = unreadCount;
              } else {
                noticeCount.style.display = "none";
              }
          }

          // 2. Generate HTML for Modal and Grid
          const generateNoticeHTML = (notices, isGrid = false) => {
            if (notices.length === 0) {
                return `<div style="padding:20px; text-align:center; color:#ddd; font-style:italic; text-shadow: 0 1px 2px rgba(0,0,0,0.5);">No notifications available.</div>`;
            }
            
            // If Grid, only show top 3. If Modal, show all.
            const listToRender = isGrid ? notices.slice(0, 3) : notices;

            return listToRender.map(n => `
              <div style="
                background: rgba(255,255,255,0.1); 
                padding: 12px; 
                margin-bottom: 10px; 
                border-radius: 8px; 
                border-left: 3px solid ${n.read ? '#555' : '#2196f3'};
                transition: background 0.2s;
                border-top: 1px solid rgba(255,255,255,0.15);
              ">
                <div style="display:flex; justify-content:space-between; align-items:flex-start;">
                    <strong style="font-size:14px; color: #fff; text-shadow: 0 1px 2px rgba(0,0,0,0.5);">${n.title || "System Update"}</strong>
                    ${!n.read && !isGrid ? '<span style="font-size:10px; background:#2196f3; padding:2px 6px; border-radius:4px;">NEW</span>' : ''}
                </div>
                <div style="font-size:11px; color:#ccc; margin:2px 0 6px; text-shadow: 0 1px 1px rgba(0,0,0,0.5);">
                    ${n.timestamp ? new Date(n.timestamp).toLocaleDateString() + ' ' + new Date(n.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) : ''}
                </div>
                
                ${n.imageUrl ? `<img src="${n.imageUrl}" loading="lazy" style="width:100%; max-height:150px; object-fit:cover; border-radius:6px; margin-bottom:8px; border:1px solid rgba(255,255,255,0.2);">` : ''}

                <p style="margin:0; font-size:13px; color:#eee; line-height:1.4; white-space: pre-wrap; text-shadow: 0 1px 1px rgba(0,0,0,0.5);">${n.message || ""}</p>
              </div>
            `).join("");
          };

          // Render to Grid (Dashboard)
          const dashboardList = document.getElementById("dashboard-notice-list");
          if(dashboardList) dashboardList.innerHTML = generateNoticeHTML(userNotices, true);

          // Render to Modal (Popup)
          const noticeList = document.getElementById("noticeList");
          if(noticeList) noticeList.innerHTML = generateNoticeHTML(userNotices, false);
        });

        // Mark all as read when opening modal
        const noticeBtn = document.getElementById("noticeBtn");
        if(noticeBtn) {
            noticeBtn.addEventListener("click", () => {
              document.getElementById("noticeModal").style.display = "flex";
              
              // Update read status locally/db
              db.ref("notices").once("value").then(snap => {
                const all = snap.val() || {};
                for(let id in all) {
                   const n = all[id];
                   if((n.to === uid || n.to === "ALL" || !n.to) && !n.read) {
                       // Only mark specifically targeted messages as read in DB to avoid messing up others
                       if(n.to === uid) db.ref(`notices/${id}/read`).set(true);
                   }
                }
                // Hide red dot immediately
                const nc = document.getElementById("noticeCount");
                if(nc) nc.style.display = "none";
              });
            });
        }

        // Close Modal Logic
        const closeNoticeBtn = document.getElementById("closeNoticeModal");
        if(closeNoticeBtn) {
            closeNoticeBtn.addEventListener("click", () => {
                document.getElementById("noticeModal").style.display = "none";
            });
        }
      }
    });

    // --- PROFILE & CLOUD HISTORY LOGIC ---
    auth.onAuthStateChanged(user => {
      if (user) {
        const uid = user.uid;
        document.getElementById('email').innerText = user.email;
        const userRef = db.ref("users/" + uid);

        userRef.once("value").then(snapshot => {
          const data = snapshot.val() || {};
          const profilePicUrl = data.profilePicture || "https://via.placeholder.com/120";
          const displayName = data.name || "Zone Member";
          
          // Update Main Profile Elements
          document.getElementById("profile-pic").src = profilePicUrl;
          document.getElementById("display-name").innerText = displayName;
          document.getElementById("display-bio").innerText = data.bio || "No bio yet.";
          document.getElementById("nameInput").value = data.name || "";
          document.getElementById("bioInput").value = data.bio || "";

          // --- ADDED: Update PC Header Elements ---
          if(document.getElementById("header-display-name")) document.getElementById("header-display-name").innerText = displayName;
          if(document.getElementById("header-profile-img")) document.getElementById("header-profile-img").src = profilePicUrl;
          
          // --- ADDED: Update Mobile Header Elements ---
          if(document.getElementById("mobile-header-name")) document.getElementById("mobile-header-name").innerText = displayName;
          if(document.getElementById("mobile-header-img")) document.getElementById("mobile-header-img").src = profilePicUrl;
          
          // Apply Theme
          if(data.bannerColor) {
              document.getElementById("profile-banner").style.background = data.bannerColor;
              document.body.style.background = data.bannerColor;
              document.body.style.backgroundSize = "cover";
              document.body.style.backgroundAttachment = "fixed";
              localStorage.setItem('zoneVaultTheme', data.bannerColor);
          }
          
          if(data.name) {
              showDisplayMode();
          } else {
              showEditMode();
          }
        });

        // --- WATCH HISTORY FROM FIREBASE CLOUD ---
        db.ref('watchHistory/' + uid).on('value', (snapshot) => {
            const historyContainer = document.getElementById("watched-list");
            const data = snapshot.val();
            
            if (data) {
                const historyItems = Object.values(data);
                historyItems.sort((a, b) => b.timestamp - a.timestamp);
                
                let historyHTML = "";
                
                historyItems.forEach(item => {
                      if (item.title && item.currentTime > 0) {
                          const minutes = Math.floor(item.currentTime / 60);
                          const seconds = Math.floor(item.currentTime % 60);
                          const timeString = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                          
                          let percent = 0;
                          if(item.duration && item.duration > 0) {
                              percent = (item.currentTime / item.duration) * 100;
                          }

                          // --- DEEP LINKING UPDATE ---
                          // Automatically links to the saved page if available
                          const targetPage = item.page || 'videos.html';
                          const targetLink = `${targetPage}?v=${item.id}`;

                          historyHTML += `
                             <div class="history-card" onclick="window.location.href='${targetLink}'">
                                <div class="history-thumb-wrapper">
                                   <img src="${item.image || 'https://via.placeholder.com/160x90'}" loading="lazy" class="history-thumb-img" alt="${item.title}">
                                   <div class="progress-bar-bg">
                                      <div class="progress-bar-fill" style="width: ${percent}%"></div>
                                   </div>
                                   <div class="time-badge">${timeString}</div>
                                </div>
                                <div class="history-details">
                                   <div class="history-title">${item.title}</div>
                                   <div class="history-meta">Stopped at ${timeString}</div>
                                   <div class="history-resume-text">
                                      <svg width="12" height="12" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                                      Resume
                                   </div>
                                </div>
                             </div>
                           `;
                      }
                });
                historyContainer.innerHTML = historyHTML || "<div style='color:#ddd; text-align:center; padding:10px; text-shadow: 0 1px 1px rgba(0,0,0,0.5);'>No history yet.</div>";
            } else {
                historyContainer.innerHTML = `
                    <div style="text-align:center; padding:30px; color:#ddd; text-shadow: 0 1px 1px rgba(0,0,0,0.5);">
                        <p style="margin-bottom:5px; font-size:14px;">No watch history found.</p>
                        <small style="font-size:12px; color:#eee;">Watch a video to see it appear here!</small>
                    </div>
                `;
            }
        });

        // Join Status
        db.ref(`joinRequests/${uid}/status`).once("value").then(snapshot => {
          const status = snapshot.val();
          let color = "#aaa";
          if(status === "Approved") color = "#4caf50";
          if(status === "Pending") color = "#ff9800";
          
          document.getElementById("join-status").innerHTML = status 
            ? `<span style="color:${color}; font-weight:bold; font-size:16px; text-shadow: 0 1px 2px rgba(0,0,0,0.8);">‚óè ${status}</span>` 
            : "<span style='color:#ccc'>No request submitted.</span>";
        });

      } else {
        window.location.href = "index.html";
      }
    });

    // --- MODES ---
    function showDisplayMode() {
        document.getElementById('profile-display-view').style.display = 'block';
        document.getElementById('profile-edit-view').style.display = 'none';
    }
    function showEditMode() {
        document.getElementById('profile-display-view').style.display = 'none';
        document.getElementById('profile-edit-view').style.display = 'block';
    }
    function toggleEditMode() {
        const editView = document.getElementById('profile-edit-view');
        if (editView.style.display === 'none') showEditMode(); else showDisplayMode();
    }

    function updateProfile() {
      const user = auth.currentUser;
      if (!user) return;
      const btn = document.querySelector('.primary-btn');
      const originalText = btn.innerText;
      btn.innerText = "Saving...";
      const uid = user.uid;
      const name = document.getElementById("nameInput").value;
      const bio = document.getElementById("bioInput").value;
      const updates = {};
      if (name) updates.name = name;
      if (bio) updates.bio = bio;
      db.ref("users/" + uid).update(updates).then(() => {
        btn.innerText = "Saved!";
        document.getElementById("display-name").innerText = name;
        
        // ADDED: Update Header text immediately upon save
        if(document.getElementById("header-display-name")) document.getElementById("header-display-name").innerText = name;
        if(document.getElementById("mobile-header-name")) document.getElementById("mobile-header-name").innerText = name;

        document.getElementById("display-bio").innerText = bio;
        setTimeout(() => {
            btn.innerText = originalText;
            showDisplayMode(); 
        }, 800);
      });
    }

    function logout() {
      if(confirm("Are you sure you want to log out?")) {
        auth.signOut().then(() => {
          window.location.href = "index.html";
        });
      }
    }
  </script>

  <script>
    function toggleSidebar() {
      const sidebar = document.getElementById('mobileSidebar');
      sidebar.classList.toggle('open');
    }
    let lastScrollY = window.scrollY;
    const scrollHeader = document.getElementById('scrollHeader');
    window.addEventListener('scroll', () => {
      const currentScrollY = window.scrollY;
      if (currentScrollY > lastScrollY && currentScrollY > 50) {
        scrollHeader.classList.add('hide');
      } else {
        scrollHeader.classList.remove('hide');
      }
      lastScrollY = currentScrollY;
    });
    const linksContainer = document.querySelector('.header-links');
    if(linksContainer) {
        linksContainer.addEventListener('wheel', (e) => {
          if (e.deltaY === 0) return;
          e.preventDefault();
          linksContainer.scrollBy({ left: e.deltaY < 0 ? -100 : 100 });
        });
    }
  </script>

<style>
  .access-denied-modal {
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0, 0, 0, 0.85); color: #fff;
    font-family: 'Segoe UI', Arial, sans-serif;
    display: flex; align-items: center; justify-content: center;
    z-index: 9999; text-align: center; padding: 20px;
    opacity: 0; animation: fadeIn 0.5s forwards; flex-direction: column;
    /* SMOOTHNESS BOOSTER */
    transform: translateZ(0);
    will-change: transform, backdrop-filter;
  }
  .access-denied-modal strong { font-size: 24px; margin-bottom: 10px; }
  .access-denied-modal button {
    margin-top: 15px; padding: 10px 25px; background: transparent;
    color: white; border: 2px solid white; border-radius: 50px;
    cursor: pointer; font-weight: bold; transition: all 0.3s ease;
  }
  .access-denied-modal button:hover { background: white; color: black; }
  @keyframes fadeIn { to { opacity: 1; } }
</style>

<script>
  const allowedPaths = [
    '/index.html', '/home.html', '/nanabnb.html', '/newtour.html',
    'hxwfanconcert.html', '/svtholiday.html', '/arenatour.html',
    '/svtjapanconcert.html', '/touragain.html', '/gallery.html',
    '/profile.html', '/soon.html', '/videos.html'
  ];
  const currentPage = window.location.pathname;
  let hasInternalAccess = sessionStorage.getItem('internalAccess') === 'true';
  const referrer = document.referrer;
  const refPath = referrer ? new URL(referrer, location.origin).pathname : null;
  const cameFromAllowedPage = refPath && allowedPaths.includes(refPath);
  if (cameFromAllowedPage) { sessionStorage.setItem('internalAccess', 'true'); hasInternalAccess = true; }
  const isIndexPage = currentPage.endsWith('index.html') || currentPage === '/';
  if (!hasInternalAccess && !isIndexPage) { showAccessDeniedModal(); }
  function showAccessDeniedModal() {
    const modal = document.createElement('div');
    modal.className = 'access-denied-modal';
    modal.innerHTML = `<strong>üö´ Access Denied</strong><div>You cannot access this page directly.</div><div id="redirectTimer">Redirecting in 3 seconds...</div><button onclick="goBack()">Go Back</button>`;
    document.body.appendChild(modal);
    setTimeout(() => { window.location.href = "index.html"; }, 3000);
  }
  function goBack() { window.history.back(); }
</script>

  <footer style="width: 100%; color: #444; padding: 30px 0; text-align: center; font-size: 12px; border-top: 1px solid #111; margin-top: 40px;">
    <p>&copy; 2025 Zone Vault. All rights reserved.</p>
  </footer>

</body>
</html>
