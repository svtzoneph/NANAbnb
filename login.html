 where can i see here the home.html <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Zone Vault - Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-database.js"></script>

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<link rel="manifest" href="manifest.json">
<link rel="icon" href="favicon-new.png" type="image/png">
<meta name="theme-color" content="#2196f3">

<style>
Â  body {
Â  Â  font-family: 'Segoe UI', sans-serif;
Â  Â  background-color: black;
Â  Â  margin: 0;
Â  Â  padding: 0;
Â  Â  display: flex;
Â  Â  justify-content: center;
Â  Â  align-items: center;
Â  Â  min-height: 100vh;
Â  Â  color: white;
Â  }
Â  .container {
Â  Â  background: rgba(34, 34, 34, 0.85);
Â  Â  padding: 32px 24px;
Â  Â  border-radius: 16px;
Â  Â  box-shadow: 0 8px 24px rgba(0,0,0,0.6);
Â  Â  width: 100%;
Â  Â  max-width: 420px;
Â  Â  backdrop-filter: blur(12px);
Â  Â  animation: fadeIn 0.6s ease-in-out;
Â  Â  margin: 16px;
Â  Â  text-align: center;
Â  }
Â  @keyframes fadeIn {
Â  Â  from { opacity: 0; transform: translateY(-20px); }
Â  Â  to { opacity: 1; transform: translateY(0); }
Â  }
Â  h2, h3 { text-align: center; margin-bottom: 20px; font-size: 1.5rem; }
Â  input, button {
Â  Â  width: 100%;
Â  Â  padding: 14px 16px 14px 42px;
Â  Â  font-size: 16px;
Â  Â  margin: 10px 0;
Â  Â  border: none;
Â  Â  border-radius: 8px;
Â  Â  box-sizing: border-box;
Â  Â  outline: none;
Â  Â  transition: 0.3s;
Â  }
Â  input { background: white; color: black; }
Â  input::placeholder { color: black; }
Â  button { background-color: black; color: white; font-weight: bold; cursor: pointer; }
Â  button:hover { background-color: black; }
Â  .hidden { display: none; }
Â  .input-icon-group { position: relative; }
Â  .input-icon-group i {
Â  Â  position: absolute;
Â  Â  left: 14px;
Â  Â  top: 50%;
Â  Â  transform: translateY(-50%);
Â  Â  color: #999;
Â  Â  font-size: 16px;
Â  Â  pointer-events: none;
Â  }
Â  p { font-size: 14px; color: #ccc; text-align: center; margin-top: 6px; }
Â  .button-row { display: flex; gap: 10px; margin: 12px 0; }
Â  .button-row button { flex: 1; padding: 14px 0; font-weight: bold; border-radius: 8px; cursor: pointer; border: none; transition: 0.3s; }
Â  .login-btn { background: black; color: white; }
Â  .google-btn { display: flex; align-items: center; justify-content: center; gap: 10px; background: white; color: black; }
Â  .google-btn img { height: 18px; }
Â  #back-btn {
Â  Â  position: fixed; top: 16px; left: 12px;
Â  Â  border: none; color: white; font-size: 24px; font-weight: bold;
Â  Â  width: 40px; height: 40px; border-radius: 50%;
Â  Â  display: flex; align-items: center; justify-content: center;
Â  Â  cursor: pointer; z-index: 9999;
Â  }
Â  @media (max-width: 480px) {
Â  Â  .container { padding: 24px 16px; margin: 12px; }
Â  Â  h2, h3 { font-size: 1.3rem; }
Â  Â  input, button { font-size: 15px; padding: 12px 14px 12px 40px; }
Â  Â  .input-icon-group i { font-size: 15px; left: 12px; }
Â  Â  #back-btn { top: 12px; left: 2px; width: 36px; height: 36px; font-size: 20px; }
Â  }
</style>
</head>
<body>

<button id="back-btn" onclick="window.history.back()">âœ•</button>

<div class="container">
Â  <div id="auth-section">
Â  Â  <h2>Zone Vault</h2>
Â  Â  <div class="input-icon-group">
Â  Â  Â  <i class="fas fa-envelope"></i>
Â  Â  Â  <input type="email" id="email" placeholder="Email" required>
Â  Â  </div>
Â  Â  <div class="input-icon-group">
Â  Â  Â  <i class="fas fa-lock"></i>
Â  Â  Â  <input type="password" id="password" placeholder="Password" required>
Â  Â  </div>
Â  Â  <div class="button-row">
Â  Â  Â  <button class="login-btn" onclick="login()">Login</button>
Â  Â  Â  <button class="google-btn" onclick="googleLogin()">
Â  Â  Â  Â  <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google logo">
Â  Â  Â  Â  Google
Â  Â  Â  </button>
Â  Â  </div>
Â  Â  <p>or <a href="register.html">Register</a></p>
Â  </div>

Â  <div id="verify-section" class="hidden">
Â  Â  <h3>ğŸ“§ Please verify your email.</h3>
Â  Â  <p>We sent a verification link to your email.</p>
Â  Â  <button onclick="reloadAndCheck()">ğŸ”„ Reload & Check</button>
Â  </div>

Â  <div id="form-section" class="hidden">
Â  Â  <h2>Request Access</h2>
Â  Â  <div class="input-icon-group">
Â  Â  Â  <i class="fas fa-user"></i>
Â  Â  Â  <input type="text" id="name" placeholder="Telegram Username" required>
Â  Â  </div>
Â  Â  <div class="input-icon-group">
Â  Â  Â  <i class="fas fa-key"></i>
Â  Â  Â  <input type="text" id="reason" placeholder="CODE" required>
Â  Â  </div>
Â  Â  <button onclick="submitRequest()">ğŸ“© Submit Request</button>
Â  </div>

Â  <div id="waiting" class="hidden">
Â  Â  <h3>â³ Waiting for admin approval...</h3>
Â  Â  <p>This page will redirect once approved.</p>
Â  Â  <p>Message Hoskwi_17 on Telegram for fast approval</p>
Â  </div>

Â  <div id="approved" class="hidden">
Â  Â  <h3>âœ… Approved! Redirecting to Home</h3>
Â  </div>
</div>

<!-- Put AFTER you initialize Firebase auth & db -->
<script type="module">
import { getDatabase, ref, set, push } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-database.js";
import { getAuth } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-auth.js";

const db = getDatabase(); // if you used const db = getDatabase(app) earlier, reuse same
const auth = getAuth();

function logActivity(action, page){
Â  try {
Â  Â  const user = auth.currentUser;
Â  Â  const uid = user?.uid || sessionStorage.getItem('currentUid') || 'anonymous';
Â  Â  const rec = {
Â  Â  Â  email: user?.email || 'anonymous',
Â  Â  Â  uid,
Â  Â  Â  action: action || page || 'page_view',
Â  Â  Â  page: page || window.location.pathname,
Â  Â  Â  timestamp: Date.now(),
Â  Â  Â  userAgent: navigator.userAgent || '',
Â  Â  Â  platform: navigator.platform || '',
Â  Â  Â  screen: `${screen.width}x${screen.height}`,
Â  Â  Â  referrer: document.referrer || ''
Â  Â  };
Â  Â  // push under userActivities/{uid}/{pushId}
Â  Â  const node = ref(db, `userActivities/${uid}/${Date.now()}_${Math.random().toString(36).slice(2,8)}`);
Â  Â  set(node, rec).catch(e=> console.error('logActivity err', e));
Â  } catch(e){ console.error(e); }
}

// call on page load
window.addEventListener('load', ()=> {
Â  logActivity('page_load', window.location.pathname);
});

// optionally call when user clicks specific actions
// e.g. document.getElementById('downloadBtn').addEventListener('click', ()=> logActivity('download','/video.html'));
</script>


<script>
if ('serviceWorker' in navigator) {
Â  navigator.serviceWorker.register('sw.js').then(reg => {
Â  Â  reg.onupdatefound = () => {
Â  Â  Â  const newSW = reg.installing;
Â  Â  Â  newSW.onstatechange = () => {
Â  Â  Â  Â  if (newSW.state === 'installed' && navigator.serviceWorker.controller) {
Â  Â  Â  Â  Â  window.location.reload();
Â  Â  Â  Â  }
Â  Â  Â  };
Â  Â  };
Â  }).catch(err => {
Â  Â  console.error('Service Worker registration failed:', err);
Â  });
}
</script>

Â Â 
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js";
import {
Â  getAuth, signInWithEmailAndPassword, onAuthStateChanged,
Â  reload, signInWithPopup, GoogleAuthProvider, signOut
} from "https://www.gstatic.com/firebasejs/10.3.1/firebase-auth.js";
import { getDatabase, ref, onValue, get, set } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-database.js";

const firebaseConfig = {
Â  apiKey: "AIzaSyAs2S6iRhnYhmqNuF0QCCYu5NuzxHxIRv0",
Â  authDomain: "tvnstream-b4497.firebaseapp.com",
Â  databaseURL: "https://tvnstream-b4497-default-rtdb.firebaseio.com",
Â  projectId: "tvnstream-b4497",
Â  storageBucket: "tvnstream-b4497.appspot.com",
Â  messagingSenderId: "308384754214",
Â  appId: "1:308384754214:web:2938e76cd29b288f75d4e7"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getDatabase(app);
const provider = new GoogleAuthProvider();
let currentUid = null;

function show(id){
Â  document.querySelectorAll(".container > div").forEach(div=>div.classList.add("hidden"));
Â  document.getElementById(id).classList.remove("hidden");
}

window.login = function(){
Â  const email = document.getElementById("email").value;
Â  const password = document.getElementById("password").value;
Â  if(!email || !password) return alert("Please enter email and password.");
Â  signInWithEmailAndPassword(auth,email,password)
Â  Â  .then(userCred=> reload(userCred.user).then(()=> show("verify-section")))
Â  Â  .catch(e=> alert("Login error: "+e.message));
};

window.googleLogin = async function(){
Â  try{
Â  Â  const result = await signInWithPopup(auth,provider);
Â  Â  const user = result.user;
Â  Â  currentUid = user.uid;
Â  Â  const reqRef = ref(db,'joinRequests/'+currentUid);
Â  Â  const snapshot = await get(reqRef);
Â  Â  const data = snapshot.val();
Â  Â  if(data){
Â  Â  Â  if(data.status==="approved"){
Â  Â  Â  Â  sessionStorage.setItem("internalAccess","true");
Â  Â  Â  Â  sessionStorage.setItem("fromIndex","true");
Â  Â  Â  Â  show("approved");
Â  Â  Â  Â  setTimeout(()=> window.location.href="home",1500);
Â  Â  Â  }else if(data.status==="pending"){
Â  Â  Â  Â  show("waiting");
Â  Â  Â  }else{
Â  Â  Â  Â  alert("âŒ Your request was denied.");
Â  Â  Â  Â  signOut(auth).then(()=> show("auth-section"));
Â  Â  Â  }
Â  Â  }else{
Â  Â  Â  show("form-section");
Â  Â  }
Â  }catch(e){ alert("Google login error: "+e.message);}
};

window.reloadAndCheck = function(){
Â  const user = auth.currentUser;
Â  if(user){
Â  Â  reload(user).then(()=>{
Â  Â  Â  if(user.emailVerified) checkJoinRequest(user);
Â  Â  Â  else alert("âŒ Your email is still not verified.");
Â  Â  });
Â  }
};

function checkJoinRequest(user){
Â  currentUid = user.uid;
Â  const reqRef = ref(db,'joinRequests/'+currentUid);
Â  onValue(reqRef,snapshot=>{
Â  Â  const data = snapshot.val();
Â  Â  if(!data) show("form-section");
Â  Â  else if(data.status==="approved"){
Â  Â  Â  sessionStorage.setItem("internalAccess","true");
Â  Â  Â  sessionStorage.setItem("fromIndex","true");
Â  Â  Â  show("approved");
Â  Â  Â  setTimeout(()=>window.location.href="home",1500);
Â  Â  }else if(data.status==="pending") show("waiting");
Â  Â  else{
Â  Â  Â  alert("âŒ Your request was denied.");
Â  Â  Â  signOut(auth).then(()=>show("auth-section"));
Â  Â  }
Â  });
}

window.submitRequest = function(){
Â  const name = document.getElementById("name").value;
Â  const reason = document.getElementById("reason").value;
Â  const user = auth.currentUser;
Â  if(!name || !reason) return alert("Please fill out all fields.");
Â  set(ref(db,'joinRequests/'+currentUid),{
Â  Â  name,
Â  Â  reason,
Â  Â  email:user.email,
Â  Â  provider:user.providerData[0]?.providerId || "password",
Â  Â  status:"pending"
Â  }).then(()=> show("waiting"));
};

onAuthStateChanged(auth,user=>{
Â  if(user){
Â  Â  reload(user).then(()=>{
Â  Â  Â  if(user.emailVerified || user.providerData.some(p=>p.providerId==="google.com")){
Â  Â  Â  Â  checkJoinRequest(user);
Â  Â  Â  }else show("verify-section");
Â  Â  });
Â  }else show("auth-section");
});
</script>

<script>
if ('serviceWorker' in navigator) {
Â  navigator.serviceWorker.register('sw.js').then(reg => {
Â  Â  reg.onupdatefound = () => {
Â  Â  Â  const newSW = reg.installing;
Â  Â  Â  newSW.onstatechange = () => {
Â  Â  Â  Â  if (newSW.state === 'installed' && navigator.serviceWorker.controller) {
Â  Â  Â  Â  Â  window.location.reload();
Â  Â  Â  Â  }
Â  Â  Â  };
Â  Â  };
Â  }).catch(err => console.error('Service Worker registration failed:', err));
}
</script>

<!-- Put this just before </body> -->

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import {
Â  getAuth, signInWithEmailAndPassword, onAuthStateChanged,
Â  reload, signInWithPopup, GoogleAuthProvider, signOut
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import {
Â  getDatabase, ref, onValue, get, set, update, push, serverTimestamp
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";
import {
Â  getMessaging, getToken, onMessage
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-messaging.js";

// âœ… Initialize Firebase once
const firebaseConfig = {
Â  apiKey: "AIzaSyAs2S6iRhnYhmqNuF0QCCYu5NuzxHxIRv0",
Â  authDomain: "tvnstream-b4497.firebaseapp.com",
Â  databaseURL: "https://tvnstream-b4497-default-rtdb.firebaseio.com",
Â  projectId: "tvnstream-b4497",
Â  storageBucket: "tvnstream-b4497.appspot.com",
Â  messagingSenderId: "308384754214",
Â  appId: "1:308384754214:web:2938e76cd29b288f75d4e7",
Â  measurementId: "G-VFNH70R4D9"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getDatabase(app);
const provider = new GoogleAuthProvider();
const messaging = getMessaging(app);

// ------------------------------------------------
// ğŸ”¹ User Login / Request / Approval Flow
// ------------------------------------------------
let currentUid = null;

function show(id) {
Â  document.querySelectorAll(".container > div").forEach(div => div.classList.add("hidden"));
Â  document.getElementById(id).classList.remove("hidden");
}

window.login = function() {
Â  const email = document.getElementById("email").value;
Â  const password = document.getElementById("password").value;
Â  if (!email || !password) return alert("Please enter email and password.");
Â  signInWithEmailAndPassword(auth, email, password)
Â  Â  .then(userCred => reload(userCred.user).then(() => show("verify-section")))
Â  Â  .catch(e => alert("Login error: " + e.message));
};

window.googleLogin = async function() {
Â  try {
Â  Â  const result = await signInWithPopup(auth, provider);
Â  Â  const user = result.user;
Â  Â  currentUid = user.uid;
Â  Â  checkJoinRequest(user);
Â  } catch (e) {
Â  Â  alert("Google login error: " + e.message);
Â  }
};

window.reloadAndCheck = function() {
Â  const user = auth.currentUser;
Â  if (user) {
Â  Â  reload(user).then(() => {
Â  Â  Â  if (user.emailVerified) checkJoinRequest(user);
Â  Â  Â  else alert("âŒ Your email is still not verified.");
Â  Â  });
Â  }
};

function checkJoinRequest(user) {
Â  currentUid = user.uid;
Â  const reqRef = ref(db, 'joinRequests/' + currentUid);
Â  onValue(reqRef, snapshot => {
Â  Â  const data = snapshot.val();
Â  Â  if (!data) show("form-section");
Â  Â  else if (data.status === "approved") {
Â  Â  Â  sessionStorage.setItem("internalAccess", "true");
Â  Â  Â  show("approved");
Â  Â  Â  setTimeout(() => window.location.href = "home", 1500);
Â  Â  } else if (data.status === "pending") show("waiting");
Â  Â  else {
Â  Â  Â  alert("âŒ Your request was denied.");
Â  Â  Â  signOut(auth).then(() => show("auth-section"));
Â  Â  }
Â  });
}

window.submitRequest = function() {
Â  const name = document.getElementById("name").value;
Â  const reason = document.getElementById("reason").value;
Â  const user = auth.currentUser;
Â  if (!name || !reason) return alert("Please fill out all fields.");
Â  set(ref(db, 'joinRequests/' + currentUid), {
Â  Â  name, reason, email: user.email,
Â  Â  provider: user.providerData[0]?.providerId || "password",
Â  Â  status: "pending"
Â  }).then(() => show("waiting"));
};

onAuthStateChanged(auth, user => {
Â  if (user) {
Â  Â  reload(user).then(() => {
Â  Â  Â  if (user.emailVerified || user.providerData.some(p => p.providerId === "google.com")) {
Â  Â  Â  Â  checkJoinRequest(user);
Â  Â  Â  Â  trackUserSession(user.uid);
Â  Â  Â  Â  subscribeToNotifications(user.uid);
Â  Â  Â  } else show("verify-section");
Â  Â  });
Â  } else show("auth-section");
});

// ------------------------------------------------
// ğŸ”¹ Realtime Activity & Session Tracking
// ------------------------------------------------
let userId = localStorage.getItem("userId");
if (!userId) {
Â  userId = "user_" + Math.random().toString(36).substring(2, 10);
Â  localStorage.setItem("userId", userId);
}

const deviceInfo = navigator.userAgent;

function logActivity(action, details = "") {
Â  const uid = currentUid || userId;
Â  const sessionRef = ref(db, "userSessions/" + uid);
Â  update(sessionRef, {
Â  Â  lastAction: action,
Â  Â  lastDetails: details,
Â  Â  lastActive: new Date().toLocaleString(),
Â  Â  device: deviceInfo,
Â  Â  currentPage: window.location.pathname
Â  });
Â  const activityRef = push(ref(db, "userSessions/" + uid + "/activityLog"));
Â  set(activityRef, {
Â  Â  action, details, timestamp: serverTimestamp(), page: window.location.pathname
Â  });
}

window.addEventListener("load", () => logActivity("Page Visit", document.title));
document.addEventListener("click", e => logActivity("Click", `Clicked ${e.target.tagName}`));
window.addEventListener("beforeunload", () => logActivity("Left Page", document.title));

function trackUserSession(uid) {
Â  update(ref(db, "userSessions/" + uid), {
Â  Â  loginTime: new Date().toLocaleString(),
Â  Â  device: deviceInfo,
Â  Â  page: window.location.pathname
Â  });
}

// ------------------------------------------------
// ğŸ”¹ Firebase Cloud Messaging Notifications
// ------------------------------------------------
async function subscribeToNotifications(userId) {
Â  try {
Â  Â  const permission = await Notification.requestPermission();
Â  Â  if (permission !== "granted") return;
Â  Â  const token = await getToken(messaging, {
Â  Â  Â  vapidKey: "BKIRidsAoqVkU5UwhUq17FGUMLriCTBs9407EC6BNuZ6zgiyaypFVGD7UNGN5JT1SB7iry0t9_jmqJwe94n_T6g"
Â  Â  });
Â  Â  if (token) await set(ref(db, "users/" + userId + "/fcmToken"), token);
Â  } catch (err) {
Â  Â  console.error("Notification error:", err);
Â  }
}

onMessage(messaging, payload => {
Â  new Notification(payload.notification?.title || "New Notification", {
Â  Â  body: payload.notification?.body || "",
Â  Â  icon: payload.notification?.image || "/favicon-new.png"
Â  });
});
</script>
Â Â 
</body>
</html>
