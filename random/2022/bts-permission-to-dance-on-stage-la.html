<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BTS: Permission to Dance on Stage - LA | Zone Vault</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script> 
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">

  <link rel="icon" href="favicon-new.png" type="image/png" />
  <meta name="theme-color" content="#050505">

  <script>
    (function() {
        function applyTheme(theme) {
            if (theme === 'light' || theme === '#ffffff' || theme === 'white') {
                document.documentElement.classList.add('light-mode');
                document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f0f2f5');
            } else {
                document.documentElement.classList.remove('light-mode');
                document.querySelector('meta[name="theme-color"]').setAttribute('content', '#050505');
            }
        }
        const savedTheme = localStorage.getItem('zoneTheme') || localStorage.getItem('zoneVaultTheme');
        if (savedTheme) { applyTheme(savedTheme); } 
        else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) { applyTheme('light'); }

        window.addEventListener('storage', (e) => {
            if (e.key === 'zoneTheme' || e.key === 'zoneVaultTheme') { applyTheme(e.newValue); }
        });
    })();
  </script>

  <style>
    /* VARIABLES */
    :root {
        --bg-color: #050505;
        --text-main: #ffffff;
        --text-muted: #a1a1aa;
        --card-bg: rgba(20, 20, 20, 0.6);
        --glass-border: 1px solid rgba(255, 255, 255, 0.08);
        --accent: #ffffff;
        --playlist-hover: rgba(255, 255, 255, 0.1);
        --highlight: #704db6; 
    }
    html.light-mode {
        --bg-color: #f0f2f5;
        --text-main: #1a1a1a;
        --text-muted: #65676b;
        --card-bg: rgba(255, 255, 255, 0.85);
        --glass-border: 1px solid rgba(0, 0, 0, 0.05);
        --accent: #000000;
        --playlist-hover: rgba(0, 0, 0, 0.05);
    }

    * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
    body {
        background-color: var(--bg-color); color: var(--text-main);
        font-family: 'Inter', sans-serif; margin: 0; padding: 20px;
        min-height: 100vh; transition: background-color 0.3s ease;
    }

    .noise-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
        pointer-events: none; z-index: -1;
    }

    .center-logo { display: flex; justify-content: center; margin-bottom: 20px; }
    .center-logo img { width: 50px; border-radius: 12px; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3)); }

    .main-layout { max-width: 1000px; width: 100%; margin: 0 auto; display: flex; flex-direction: column; gap: 25px; }

    .glass-card {
        background: var(--card-bg); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
        border: var(--glass-border); border-radius: 20px; overflow: hidden;
        box-shadow: 0 20px 40px -10px rgba(0,0,0,0.1); transition: background 0.3s;
    }

    /* RESPONSIVE IFRAME CONTAINER */
    .iframe-container {
        position: relative;
        width: 100%;
        padding-top: 56.25%; /* 16:9 Aspect Ratio */
        background: #000;
    }
    .iframe-container iframe {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        width: 100%;
        height: 100%;
        border: none;
    }

    /* SECURITY MODAL */
    .access-denied-modal {
        position: fixed; top: 0; left: 0; right: 0; bottom: 0;
        background: rgba(0, 0, 0, 0.9); color: #fff;
        display: flex; align-items: center; justify-content: center;
        z-index: 11000; flex-direction: column; text-align: center;
        backdrop-filter: blur(15px); padding: 20px; opacity: 0;
        animation: fadeIn 0.5s forwards;
    }
    @keyframes fadeIn { to { opacity: 1; } }
    .access-denied-modal button { 
        margin-top: 20px; padding: 10px 25px; border-radius: 50px; 
        background: transparent; border: 2px solid white; color: white; cursor: pointer;
        font-weight: bold; transition: 0.3s;
    }
    .access-denied-modal button:hover { background: white; color: black; }

    /* LANDSCAPE / MOBILE */
    .back-btn {
        position: fixed; bottom: 30px; right: 30px; width: 50px; height: 50px; background: var(--card-bg); backdrop-filter: blur(10px);
        border: var(--glass-border); border-radius: 50%; display: flex; justify-content: center; align-items: center;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2); transition: 0.3s; z-index: 100; cursor: pointer; text-decoration: none;
    }
    .back-btn:hover { background: var(--text-main); transform: scale(1.1); }
    .back-btn svg { stroke: var(--text-main); }
    .back-btn:hover svg { stroke: var(--bg-color); }

    .metadata-section { padding: 30px; display: flex; flex-direction: column; gap: 20px; }
    .meta-header h1 { font-size: 28px; font-weight: 700; margin: 0 0 10px 0; color: var(--text-main); }
    .meta-desc { font-size: 15px; line-height: 1.6; color: var(--text-muted); }
    .meta-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; padding-top: 20px; border-top: 1px solid var(--glass-border); }
    .meta-item strong { color: var(--text-main); display: block; margin-bottom: 4px; }
    .meta-item span { color: var(--text-muted); font-size: 14px; }

    @media (orientation: landscape) and (max-width: 900px) {
        body { padding: 0; background: #000; display: flex; align-items: center; justify-content: center; height: 100vh; overflow: hidden; }
        .main-layout { max-width: 100%; height: 100%; margin: 0; gap: 0; }
        .center-logo, .back-btn, .glass-card:not(.iframe-container-card) { display: none !important; }
        .iframe-container-card { width: 100% !important; height: 100% !important; border-radius: 0; border: none; display: flex; align-items: center; justify-content: center; }
        .iframe-container { height: 100%; width: 100%; padding-top: 0; }
    }
  </style>
</head>

<body>

<div class="noise-overlay"></div>

<div class="center-logo">
  <img src="https://uploads.onecompiler.io/43ddry4jt/43s3sjvch/Zone%20Vault%20logo.png" alt="Zone Vault Logo">
</div>

<div class="main-layout">
    
    <div class="glass-card iframe-container-card" style="padding:0; overflow:hidden;">
        <div class="iframe-container">
            <iframe src="https://mixdrop.top/e/gjkexg09c8pk0q" frameborder="0" allowfullscreen scrolling="no"></iframe>
        </div>
    </div>

    <div class="glass-card metadata-section">
        <div class="meta-header">
            <h1>BTS: Permission to Dance on Stage - LA</h1>
            <div style="display:flex; gap:15px; align-items:center; margin-bottom:15px;">
               <span style="background:var(--playlist-hover); color:var(--text-main); padding:4px 8px; border-radius:4px; font-size:12px; font-weight:700;">HD</span>
            </div>
            <div class="meta-desc">
                Purple colors the city of Los Angeles, as BTS brings their "Permission to Dance" concert to SoFi Stadium for the first time in two years. In a stadium radiating anticipation and cheer, splendid performances from "On" to "Permission to Dance" glorify the stage that now comes to life on screen. Be united once again by the power of music.
            </div>
        </div>
        <div class="meta-grid">
            <div class="meta-item"><strong>Released</strong><span>2022-09-08</span></div>
            <div class="meta-item"><strong>Duration</strong><span>130 min</span></div>
        </div>
    </div>

</div>

<a href="javascript:history.back()" class="back-btn">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M15 18l-6-6 6-6" />
  </svg>
</a>

<script>
    // --- RESTORED SECURITY CHECK ---
    const allowedPaths = [
        '/index.html', '/home.html', '/nanabnb.html', '/newtour.html', '/hxwfanconcert.html',
        '/svtholiday.html', '/arenatour.html', '/svtjapanconcert.html', '/touragain.html',
        '/gallery.html', '/profile.html', '/soon.html'
    ];
    const currentPage = window.location.pathname;
    let hasInternalAccess = sessionStorage.getItem('internalAccess') === 'true';
    const referrer = document.referrer;
    const refPath = referrer ? new URL(referrer).pathname : null;
    const cameFromAllowedPage = refPath && allowedPaths.includes(refPath);
    if (cameFromAllowedPage) { sessionStorage.setItem('internalAccess', 'true'); hasInternalAccess = true; }
    const isIndexPage = currentPage.endsWith('index.html') || currentPage === '/';
    
    if (!hasInternalAccess && !isIndexPage) { showAccessDeniedModal(); }

    function showAccessDeniedModal() {
        const modal = document.createElement('div');
        modal.className = 'access-denied-modal';
        modal.innerHTML = `
        <strong style="font-size: 24px; margin-bottom: 10px;">ðŸš« Access Denied</strong>
        <div>You cannot access this page directly.<br>Please go through the homepage or allowed sections.</div>
        <div id="redirectTimer" style="margin-top:10px;">Redirecting in 3 seconds...</div>
        <button onclick="goBack()">Go Back</button>
        `;
        document.body.appendChild(modal);
        let countdown = 3;
        const timer = document.getElementById('redirectTimer');
        const interval = setInterval(() => {
        countdown--;
        timer.textContent = `Redirecting in ${countdown} seconds...`;
        if (countdown <= 0) { clearInterval(interval); window.location.href = "index.html"; }
        }, 1000);
    }
    function goBack() { window.history.back(); }
</script>

</body>
</html>
